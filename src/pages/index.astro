---
import { getCollection } from "astro:content";

// Layout import — provides basic page elements: <head>, <nav>, <footer> etc.
import BaseLayout from "../layouts/BaseLayout.astro";

// Component Imports
import CallToAction from "../components/CallToAction.astro";
import Grid from "../components/Grid.astro";
import Hero from "../components/Hero.astro";
import Icon from "../components/Icon.astro";
import Pill from "../components/Pill.astro";
import PortfolioPreview from "../components/PortfolioPreview.astro";

// Page section components
import ContactCTA from "../components/ContactCTA.astro";
import Skills from "../components/Skills.astro";

// Content Fetching: List four most recent work projects
const projects = (await getCollection("work"))
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 4);

// Full Astro Component Syntax:
// https://docs.astro.build/core-concepts/astro-components/
---

<BaseLayout>
  <div class="stack gap-20 lg:gap-48">
    <div class="wrapper stack gap-8 lg:gap-20">
      <header class="hero">
        <Hero
          title="Hello, my name is Maxime FERRIER"
          tagline="I'm a senior Android developer based in Toulouse, France."
          align="start"
        >
          <div class="roles">
            <Pill><Icon icon="android-logo" size="1.33em" /> Developer</Pill>
            <Pill><Icon icon="team-three" size="1.33em" /> Tech Lead</Pill>
            <Pill><Icon icon="microphone-stage" size="1.33em" /> Speaker</Pill>
          </div>
        </Hero>

        <img
          alt="Maxime FERRIER smiling"
          width="480"
          height="620"
          src="/assets/photo.png"
        />
      </header>

      <Skills />
    </div>

    <main class="wrapper stack gap-20 lg:gap-48">
      <section class="section with-background with-cta">
        <header class="section-header stack gap-2 lg:gap-4">
          <h3>My last projects</h3>
          <p>
            Take a look below at some of my featured work for clients from the
            past few years.
          </p>
        </header>

        <div class="gallery">
          <Grid variant="offset">
            {
              projects.map((project) => (
                <li>
                  <PortfolioPreview project={project} />
                </li>
              ))
            }
          </Grid>
        </div>

        <div class="cta">
          <CallToAction href="/work/">
            View All
            <Icon icon="arrow-right" size="1.2em" />
          </CallToAction>
        </div>
      </section>

      <section class="section with-background bg-variant">
        <header class="section-header stack gap-2 lg:gap-4">
          <h3>Recommandations</h3>
          <p>
            They trusted me, here's what my colleagues have to say about me
        </header>

        <div class="gallery">
          <Grid variant="small">
            {
              [
                {
                  name: "Alberto CANTALLOPS NAVARRO",
                  photo:
                    "https://media.licdn.com/dms/image/C4E03AQG_6sQIPNitwA/profile-displayphoto-shrink_100_100/0/1660313161085?e=1715212800&v=beta&t=6P2nJaSIhtOTxQGGmC0vLWmNOX5FILL43fSdetSafW4",
                  comment:
                    "Even in the short time we worked together, he was extraordinary, so I can highly recommend him for Android projects. He has deep Android knowledge, giving a lot of input to improve the codebase and even cross-platform solutions that helped the iOS team.",
                  from: "LinkedIn",
                },
                {
                  name: "Cédric LOUBIERE",
                  photo:
                    "https://dam.malt.com/286d2596-77f9-4e19-bae7-6a47dafc3a82?gravity=face&func=crop&w=80&h=80&force_format=png?gravity=face&func=crop&w=80&h=80&force_format=png",
                  comment:
                    "Je recommande Maxime, il a su faire preuve de beaucoup de rigueur tout au long de la mission et a pris de plus en plus de responsabilités au fil des mois. Je serais ravi de pouvoir travailler à nouveau avec lui",
                  from: "Malt",
                },
                {
                  name: "Cédric LOUBIERE",
                  photo:
                    "https://dam.malt.com/286d2596-77f9-4e19-bae7-6a47dafc3a82?gravity=face&func=crop&w=80&h=80&force_format=png?gravity=face&func=crop&w=80&h=80&force_format=png",
                  comment:
                    "Nous travaillons avec Maxime depuis 6 mois et sommes ravis de son travail. Il est rigoureux, fiable et très professionnel au quotidien. Je recommande Maxime pour vos projets d'application mobile en Kotlin !",
                  from: "Malt",
                },
                {
                  name: "Benjamin LEBAILLY",
                  photo:
                    "https://media.licdn.com/dms/image/C4D03AQGpjqLAOnmfMA/profile-displayphoto-shrink_100_100/0/1595947458958?e=1715212800&v=beta&t=M-rV4IZNLlkXCheaGBEtJmDuAHfjiTSkYn2-otAa6y0",
                  comment:
                    "Maxime dispose d'un très bon niveau technique sur les stacks Androïd. Il est en capacité d'intervenir sur des environnements complexes en tant que référent technique et a eu l'occasion d'accompagner des développeurs juniors. Il aime transmettre et former et construit à ce titre des modules de formation. Nous le recommandons sur des interventions de Référent Technique / Développeur et lead technique d'équipes de 2 à 3 personnes.",
                  from: "LeHibou",
                },
                {
                  name: "Ilya SELIVERSTOV",
                  photo:
                    "https://media.licdn.com/dms/image/C4E03AQF3ul0EqEB7CQ/profile-displayphoto-shrink_100_100/0/1516270833307?e=1715212800&v=beta&t=ieg86jXf0AtqF2y1E7rRPXnNUeNiH8VOZyqWpagKEsE",
                  comment:
                    "Maxime is one of the most reliable software engineers who I have worked with. Very organised, self motivated, pro-active and responsible. He is also a great co-worker who works hard, always ready to help, and with great sense of humour. He helped me a lot with tuning one of our new products, and especially with deep integration of voice assistance. Thanks Maxime!",
                  from: "LinkedIn",
                },
                {
                  name: "Nedra KACHROUDI",
                  photo:
                    "https://media.licdn.com/dms/image/C4D03AQHCLXqcDpRFSQ/profile-displayphoto-shrink_100_100/0/1637163477298?e=1715212800&v=beta&t=C-6UTNYve2Wbc1mhxwK-k23xJsZ3eM-6z8f-aB0Ej4E",
                  comment:
                    "J’ai travaillé avec Maxime en tant que lead developpeur Android à la Maif, j’ai beaucoup apprécié sa motivation, sa veille technologique et ses propositions d’idées. Il a réussi à me convaincre de migrer vers Kotlin ;). Enfin, Maxime est un très bon developpeur Android, il apprend vite et il est à l’ecoute pour monter ses competences. Coté humain, il est tres sociable, sympathique et s’integre vite dans l’equipe.",
                  from: "LinkedIn",
                },
                {
                  name: "Florent MORIN",
                  photo:
                    "https://media.licdn.com/dms/image/D4E03AQH7uYhkRKrKKA/profile-displayphoto-shrink_100_100/0/1705677750746?e=1715212800&v=beta&t=13zVSpHNkBGN0xEyx2KyHYhnN1fnwUNQ0y3xenYGqZE",
                  comment:
                    "J'ai travaillé avec Maxime lorsque nous étions développeur iOS et développeur Android au sein d'un premier projet mobile. Nous avons ensuite eu l'occasion de travailler au sein des équipes iOS et Android de l'équipe mobile MAIF. Sans travailler directement avec Maxime, j'ai toujours eu de riches échanges avec lui. Il est investi et passionné par son métier. Nous avons également eu l'occasion d'animer ensemble quelques Meetups illustrant des sujets mobiles dans nos domaines de compétence respectifs. Du peu que j'ai pu travailler avec lui, c'est un bon élément dans une équipe.",
                  from: "LinkedIn",
                },
                {
                  name: "Cyril ROUSSEAU",
                  photo:
                    "https://media.licdn.com/dms/image/C4E03AQFXDvDbVFmyNg/profile-displayphoto-shrink_100_100/0/1560488741959?e=1715212800&v=beta&t=IpMqPMMsVHKLfWeDfjiKbOJJSwAe8R6VoPoNUQZghFg",
                  comment:
                    "A l'écoute de ses collègues et appliqué dans son travail, Maxime a démontré à plusieurs reprises ses qualités humaines et techniques au sein de l'équipe Macif.mobi. C'est un collègue appréciable et apprécié, toujours volontaire et sans retenue dans son investissement. Ce fut un réel plaisir de travailler à ses côtés.",
                  from: "LinkedIn",
                },
                {
                  name: "Kevin VALETTE",
                  photo:
                    "https://media.licdn.com/dms/image/C4D03AQFR0EPFkgl63A/profile-displayphoto-shrink_100_100/0/1638790205121?e=1715212800&v=beta&t=vbiFeJKY8C68bX6Zoc1aruhRVUSHhLb767FqNmyuYTc",
                  comment:
                    "La contribution de Maxime sur le pôle mobile de la Macif a été importante dans la construction de notre roadmap technique. Son experience sur l'architecture Android, sa polyvalence techniques et ses qualités pédagogique ont été des atouts dans notre équipe.",
                  from: "LinkedIn",
                },
              ].map((recommandation) => (
                <li class="card-li">
                  <div class="card">
                    <div class="header">
                      <img
                        class="image"
                        src={recommandation.photo}
                        alt={recommandation.name}
                      />
                      <div>
                        <p class="name">{recommandation.name}</p>
						<p>From: {recommandation.from}</p>
                      </div>
                    </div>

                    <p class="message">{recommandation.comment}</p>
                  </div>
                </li>
              ))
            }
          </Grid>
        </div>
      </section>
    </main>

    <ContactCTA />
  </div>
</BaseLayout>

<style>
  .hero {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
  }

  .roles {
    display: none;
  }

  .hero img {
    aspect-ratio: 5 / 4;
    object-fit: cover;
    object-position: top;
    border-radius: 1.5rem;
    box-shadow: var(--shadow-md);
  }

  @media (min-width: 50em) {
    .hero {
      display: grid;
      grid-template-columns: 6fr 4fr;
      padding-inline: 2.5rem;
      gap: 3.75rem;
    }

    .roles {
      margin-top: 0.5rem;
      display: flex;
      gap: 0.5rem;
    }

    .hero img {
      aspect-ratio: 3 / 4;
      border-radius: 4.5rem;
      object-fit: cover;
    }
  }

  /* ====================================================== */

  .section {
    display: grid;
    gap: 2rem;
  }

  .with-background {
    position: relative;
  }

  .with-background::before {
    --hero-bg: var(--bg-image-subtle-2);

    content: "";
    position: absolute;
    pointer-events: none;
    left: 50%;
    width: 100vw;
    aspect-ratio: calc(2.25 / var(--bg-scale));
    top: 0;
    transform: translateY(-75%) translateX(-50%);
    background:
      url("/assets/backgrounds/noise.png") top center/220px repeat,
      var(--hero-bg) center center / var(--bg-gradient-size) no-repeat,
      var(--gray-999);
    background-blend-mode: overlay, normal, normal, normal;
    mix-blend-mode: var(--bg-blend-mode);
    z-index: -1;
  }

  .with-background.bg-variant::before {
    --hero-bg: var(--bg-image-subtle-1);
  }

  .section-header {
    justify-self: center;
    text-align: center;
    max-width: 50ch;
    font-size: var(--text-md);
    color: var(--gray-300);
  }

  .section-header h3 {
    font-size: var(--text-2xl);
  }

  @media (min-width: 50em) {
    .section {
      grid-template-columns: repeat(4, 1fr);
      grid-template-areas: "header header header header" "gallery gallery gallery gallery";
      gap: 5rem;
    }

    .section.with-cta {
      grid-template-areas: "header header header cta" "gallery gallery gallery gallery";
    }

    .section-header {
      grid-area: header;
      font-size: var(--text-lg);
    }

    .section-header h3 {
      font-size: var(--text-4xl);
    }

    .with-cta .section-header {
      justify-self: flex-start;
      text-align: left;
    }

    .gallery {
      grid-area: gallery;
    }

    .cta {
      grid-area: cta;
    }
  }

  /* ====================================================== */

  .card-li {
    margin-bottom: 2rem;
  }

  .card {
    padding: 2rem;
    max-width: 320px;
    border-radius: 10px;
    text-align: justify;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--gray-800);
    border-radius: 1.5rem;
    color: var(--gray-300);
    background: var(--gradient-subtle);
    box-shadow: var(--shadow-sm);
  }

  .header {
    display: flex;
    align-items: center;
    grid-gap: 1rem;
    gap: 1rem;
  }

  .header .image {
    height: 4rem;
    width: 4rem;
    border-radius: 9999px;
    object-fit: cover;
    background-color: royalblue;
  }

  .name {
    margin-top: 0.25rem;
    font-size: 1.125rem;
    line-height: 1.75rem;
    font-weight: 600;
    --tw-text-opacity: 1;
    color: rgba(55, 65, 81, 1);
  }

  .message {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    margin-top: 1rem;
    color: rgba(107, 114, 128, 1);
    font-style: italic;
  }
</style>
